(function(n){"use strict";function e(){function y(n,t){n.attr("transform",function(n){return"translate("+(t(n)+u)+", 0)"})}function p(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function w(n){var t=n[0],i=n[n.length-1];return t<i?[t,i]:[i,t]}function b(n){for(var t=[],i=Math.ceil(n[0]);i<n[1];i++)t.push(i);return t.length>0&&t[0]>0&&t.unshift(t[0]-(t[1]-t[0])),t}function a(n,t){return n.length<o||t%Math.ceil(n.length/o)==0}function k(n){return n<h.length?h[n]:n}function v(n){var t=k(n);return s?s(t):t}function n(n){n.each(function(){var rt=t.select(this),nt=b(i.domain()),h=rt.selectAll(".tick.major").data(nt,String),s=h.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),lt=t.transition(h.exit()).style("opacity",1e-6).remove(),k=t.transition(h).style("opacity",1),o,tt,d=i.rangeExtent?i.rangeExtent():w(i.range()),ut=rt.selectAll(".domain").data([0]),ct,it;ut.enter().append("path").attr("class","domain");var ft=t.transition(ut),n=i.copy(),at=this.__chart__||n;this.__chart__=n;s.append("line");s.append("text");var et=s.select("line"),ot=k.select("line"),g=h.select("text"),st=s.select("text"),ht=k.select("text");u=(n(1)-n(0))/2;tt=l?0:u;switch(c){case"bottom":o=y;et.attr("y2",r);st.attr("y",Math.max(r,0)+e);ot.attr("x1",tt).attr("x2",tt).attr("y2",r);ht.attr("x",0).attr("y",Math.max(r,0)+e);g.attr("dy",".71em").style("text-anchor","middle");g.text(function(n){return a(nt,n)?v(n):""});ft.attr("d","M"+d[0]+","+f+"V0H"+d[1]+"V"+f);break;case"left":o=p;et.attr("x2",-r);st.attr("x",-(Math.max(r,0)+e));ot.attr("x2",-r).attr("y2",0);ht.attr("x",-(Math.max(r,0)+e)).attr("y",u);g.attr("dy",".32em").style("text-anchor","end");g.text(function(n){return a(nt,n)?v(n):""});ft.attr("d","M"+-f+","+d[0]+"H0V"+d[1]+"H"+-f)}i.ticks?(s.call(o,at),k.call(o,n),lt.call(o,n)):(ct=n.rangeBand()/2,it=function(t){return n(t)+ct},s.call(o,it),k.call(o,it))})}var i=t.scale.linear(),c="bottom",r=6,f=6,e=3,l=!1,o=10,u=0,s=null,h=[];return n.scale=function(t){return arguments.length?(i=t,n):i},n.orient=function(t){return arguments.length?(c=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",n):c},n.categories=function(t){return arguments.length?(h=t,n):h},n.tickCentered=function(t){return arguments.length?(l=t,n):l},n.tickTextNum=function(t){return arguments.length?(o=t,n):o},n.tickFormat=function(t){return arguments.length?(s=t,n):s},n.tickOffset=function(){return u},n.ticks=function(){return},n}function u(n){return n||n===0}function i(n){return typeof n=="undefined"}function r(n){return typeof n!="undefined"}var f=n.c3={},t=n.d3;f.generate=function(f){function bc(n,t){if(!(n in f))throw Error(t);}function h(n,t){for(var r=f,i=0;i<n.length;i++){if(!(n[i]in r))return t;r=r[n[i]]}return r}function go(){bf=ns();ui=ts();a={top:0,left:(s?uf+ko:0)+is(),bottom:20+(s?0:uf)+ri,right:rs()};y=bf-a.left-a.right;p=ui-a.top-a.bottom;fr={top:s?a.top:ui-uf-ri,left:s?bo:a.left,bottom:20+ri,right:NaN};wf=s?a.left-bo-ko:y;nu=s?p:ui-fr.top-fr.bottom;er={top:ui-ri,right:NaN,bottom:0,left:a.left};ea=ui-er.top-er.bottom;fe()}function fe(){kf=p/2;or=kf*.95;df=ce(o.data.targets)?or*.6:0}function va(){var n=v.property("offsetLeft");return n?n:0}function ns(){return nf?nf:ya()}function ts(){var n=tf?tf:pa();return n>0?n:320}function is(){return to?to:ff?1:us("y")}function rs(){return io?io:so?of||s?1:us("y2"):1}function us(){return 40}function ya(){return+t.select(oi).style("width").replace("px","")}function pa(){return+t.select(oi).style("height").replace("px","")}function fs(){return y+2+a.left+a.right}function wa(){return 40}function ba(){return a.left+20}function ka(){return p-a.top+2}function da(){var n=s?p:y,i=as(),t=lr();return t>1?n*i/(t-1):n}function es(){var n,t;iu=s?1:0;ru=s?p:y;ne=s?0:p;te=s?y:1;oa=iu;sa=ru;ie=s?0:nu;re=s?wf:1;l=oe(iu,ru,l?l.domain():undefined,function(){return ot.tickOffset()});d=hr(ne,te,d?d.domain():undefined);ct=hr(ne,te,ct?ct.domain():undefined);ht=oe(iu,ru,gt,function(n){return n%1?0:eu.tickOffset()});uu=hr(ie,re);fu=hr(ie,re);n=hs();t=ga();ot=os(l,ha,n,t);eu=os(ht,aa,n,t);sr=ss(d,ca,ef,ll);ue=ss(ct,la,pl,wl);ee()}function ee(){tu=nv();po=cs();wo=cs(.98)}function oe(n,u,f,e){var o=(nt?t.time.scale():t.scale.linear()).range([n,u]),s,h;if(o.orgDomain=function(){return o.domain()},r(f)&&o.domain(f),i(e)&&(e=function(){return 0}),dt){s=o;o=function(n){return s(n)+e(n)};for(h in s)o[h]=s[h];o.orgDomain=function(){return s.domain()};o.domain=function(n){return arguments.length?(s.domain(n),o):(n=s.domain(),[n[0],n[1]+1])}}return o}function hr(n,i){return t.scale.linear().range([n,i])}function ft(n){return fi(n)==="y2"?ct:d}function li(n){return fi(n)==="y2"?fu:uu}function os(n,i,r,u){var f=(dt?e():t.svg.axis()).scale(n).orient(i);return f.tickFormat(r).ticks(u),dt?f.categories(gi).tickCentered(fl):f.tickOffset=function(){return 0},f}function ss(n,i,r,u){return t.svg.axis().scale(n).orient(i).tickFormat(r).ticks(u).outerTickSize(0)}function fi(n){return n in uo?uo[n]:"y"}function hs(){var n=nt?fa:dt?kv:null;return dr&&(typeof dr=="function"?n=dr:nt&&(n=function(n){return t.time.format(dr)(n)})),n}function ga(){var n=lr();return n<10?n:10}function ou(n){var t=!1;return gf(o.data.targets).forEach(function(i){if(!t&&i.data.id===n.data.id){t=!0;n=i;return}}),t?n:null}function nv(){var n=t.svg.arc().outerRadius(or).innerRadius(df),i=function(t,i){var r;return i?n(t):(r=ou(t),r?n(r):"M 0 0")};return i.centroid=n.centroid,i}function cs(n){var i=t.svg.arc().outerRadius(kf*(n?n:1)).innerRadius(df);return function(n){var t=ou(n);return t?i(t):"M 0 0"}}function tv(n,t){return gh(n.data)?tu(n,t):"M 0 0"}function iv(n){var f=ou(n),r,t,i,u,e="";return f&&(r=tu.centroid(f),t=r[0],i=r[1],u=Math.sqrt(t*t+i*i),e="translate("+t/u*or*.8+","+i/u*or*.8+")"),e}function rv(n){return(n.endAngle-n.startAngle)/(Math.PI*2)}function uv(n){return ia(n,rv(n))}function ls(n,t){var i=v.selectAll(".chart-arc"+ni(n)),r=v.selectAll(".-arc").filter(function(t){return t.data.id!==n});i.selectAll("path").transition().duration(50).attr("d",po).transition().duration(100).attr("d",wo).each(function(n){dh(n.data)});t||r.style("opacity",.3)}function se(n){var t=v.selectAll(".chart-arc"+ni(n));t.selectAll("path").transition().duration(50).attr("d",tu);v.selectAll(".-arc").style("opacity",1)}function fv(n){var i=nh(n),u,f,r,e,o;if(w.length>0)for(o=ih(n),u=0;u<w.length;u++)for(r=w[u][0],o&&i[r]&&i[r].forEach(function(n,t){i[r][t]=n<0?n:0}),f=1;f<w[u].length;f++)(e=w[u][f],i[e])&&i[e].forEach(function(n,t){fi(e)!==fi(r)||!i[r]||o&&+n>0||(i[r][t]+=+n)});return t.min(Object.keys(i).map(function(n){return t.min(i[n])}))}function ev(n){var i=nh(n),u,f,r,e,o;if(w.length>0)for(o=bv(n),u=0;u<w.length;u++)for(r=w[u][0],o&&i[r]&&i[r].forEach(function(n,t){i[r][t]=n>0?n:0}),f=1;f<w[u].length;f++)(e=w[u][f],i[e])&&i[e].forEach(function(n,t){fi(e)!==fi(r)||!i[r]||o&&+n<0||(i[r][t]+=+n)});return t.max(Object.keys(i).map(function(n){return t.max(i[n])}))}function su(n){var r=au(function(t){return fi(t.id)===n}),c=n==="y2"?vl:sl,l=n==="y2"?al:ol,i=c?c:fv(r),f=l?l:ev(r),t=Math.abs(f-i)*.1,o=t,e=t,s=n==="y2"?yl:hl,h;return s&&(h=Math.max(Math.abs(i),Math.abs(f)),f=h-s,i=s-h),n==="y"&&nr&&(o=u(nr.top)?nr.top:t,e=u(nr.bottom)?nr.bottom:t),n==="y2"&&tr&&(o=u(tr.top)?tr.top:t,e=u(tr.bottom)?tr.bottom:t),hy(r)&&!ih(r)&&(e=i),[i-e,f+o]}function as(n){return n?1:cu(gt)/cu(l.domain())}function ov(n){return t.min(n,function(n){return t.min(n.values,function(n){return n.x})})}function sv(n){return t.max(n,function(n){return t.max(n.values,function(n){return n.x})})}function hu(n){var u=[ov(n),sv(n)],i=u[0],r=u[1],t=dt?0:Math.abs(i-r)*.01,f=nt?new Date(i.getTime()-t):i-t,e=nt?new Date(r.getTime()+t):r+t;return[f,e]}function cu(n){return n[1]-n[0]}function hv(n){for(var t=0;t<n.length;t++)if(!(n[t]in kr))return!1;return!0}function cv(n,t){kr[n]=ks(t)}function lv(n){for(var i=[],t=0;t<n.length;t++)n[t]in kr&&i.push(ks(kr[n[t]]));return i}function he(n){return"start"in n?l(nt?ei(n.start):n.start):0}function vs(n){var i=he(n),r="end"in n?l(nt?ei(n.end):n.end):y,t=r-i;return t<0?0:t}function ys(n){return bi&&n===bi||ti&&wy(ti,n)}function av(n){return!ys(n)}function ps(n){return bi?bi:ti?ti[n]:null}function vv(n,t){return n in o.data.x&&o.data.x[n]&&o.data.x[n][t]?o.data.x[n][t]:t}function yv(n){Object.keys(n).forEach(function(t){ti[t]=n[t]})}function lu(n){var t;return n&&(t=ki[n.id],n.name=t?t:n.id),n}function ws(n){for(var f=n[0],r={},u=[],i,t=1;t<n.length;t++){for(r={},i=0;i<n[t].length;i++)r[f[i]]=n[t][i];u.push(r)}return u}function bs(n){for(var u=[],t,f,r=0;r<n.length;r++)for(f=n[r][0],t=1;t<n[r].length;t++)i(u[t-1])&&(u[t-1]={}),u[t-1][f]=n[r][t];return u}function cr(i){var u=t.keys(i[0]).filter(av),f=t.keys(i[0]).filter(ys),r;return nt&&f.length===0?(n.alert('data.x or data.xs must be specified when axis.x.type == "timeseries"'),[]):(vf&&u.forEach(function(n){var t=ps(n);o.data.x[n]=f.indexOf(t)>=0?i.map(function(n){return n[t]}):o.data.x[Object.keys(o.data.x)[0]]}),r=u.map(function(n){var t=tl(n);return{id:t,id_org:n,values:i.map(function(i,r){var u,f=ps(n);return u=nt?ei(i[f]):vf?i[f]?+i[f]:vv(n,r):r,i.x=u,{x:u,value:i[n]!==null&&!isNaN(i[n])?+i[n]:null,id:t}})}}),r.forEach(function(n){var t;n.values=n.values.sort(function(n,t){var i=n.x||n.x===0?n.x:Infinity,r=t.x||t.x===0?t.x:Infinity;return i-r});t=0;n.values.forEach(function(n){n.index=t++})}),fo&&lt(ar(r).filter(function(n){return!(n in k)}),fo),r.forEach(function(n){cv(n.id_org,n)}),r)}function ks(n){return{id:n.id,id_org:n.id_org,values:n.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}}function ds(n){return n>0&&o.data.targets[0].values[n-1]?o.data.targets[0].values[n-1].x:undefined}function pv(n){return n<lr()-1?o.data.targets[0].values[n+1].x:undefined}function lr(){return t.max(o.data.targets,function(n){return n.values.length})}function wv(){var t=o.data.targets.length,i=0,n;return t>1?o.data.targets.forEach(function(t){t.values.length>i&&(n=t,i=t.values.length)}):n=t?o.data.targets[0]:null,n}function ar(n){return n=i(n)?o.data.targets:n,n.map(function(n){return n.id})}function gs(n){for(var i=ar(),t=0;t<i.length;t++)if(i[t]===n)return!0;return!1}function au(n){return r(n)?o.data.targets.filter(n):o.data.targets}function nh(n){var t={};return n.forEach(function(n){t[n.id]=[];n.values.forEach(function(i){t[n.id].push(i.value)})}),t}function th(n,t){for(var f=Object.keys(n),r,u,i=0;i<f.length;i++)for(u=n[f[i]].values,r=0;r<u.length;r++)if(t(u[r].value))return!0;return!1}function ih(n){return th(n,function(n){return n<0})}function bv(n){return th(n,function(n){return n>0})}function kv(n){return n<gi.length?gi[n]:n}function vr(n){return"-shapes -shapes-"+n.id}function rh(n){return vr(n)+" -line -line-"+n.id}function dv(n){return vr(n)+" -circles -circles-"+n.id}function uh(n){return vr(n)+" -bars -bars-"+n.id}function gv(n){return vr(n.data)+" -arc -arc-"+n.data.id}function ny(n){return vr(n)+" -area -area-"+n.id}function fh(n,t){return"-shape -shape-"+t}function ty(n,t){return fh(n,t)+" -circle -circle-"+t}function eh(n,t){return fh(n,t)+" -bar -bar-"+t}function iy(n,t){return"region region-"+t+" "+("classes"in n?[].concat(n.classes).join(" "):"")}function oh(n,t){return"event-rect event-rect-"+t}function ry(n){return u(n.value)?kh(n)?.5:1:0}function ai(n){return n?l(n.x):null}function yr(n){return l(nt?ei(n.value):n.value)}function pr(n){return d(n.value)}function sh(n){return ht(n.x)}function hh(n,t){for(var u=n[t].x,r=[],i=t-1;i>=0;i--){if(u!==n[i].x)break;r.push(n[i])}for(i=t;i<n.length;i++){if(u!==n[i].x)break;r.push(n[i])}return r}function ch(n,t,i,r){var u=i?i:0,f=r?r:n.length-1,o=Math.floor((f-u)/2)+u,s=n[o],h=l(s.x)-t[0],e;return(h>0?f=o:u=o,f-u==1)?(e=[],n[u].x&&(e=e.concat(hh(n,u))),n[f].x&&(e=e.concat(hh(n,f))),ah(e,t)):ch(n,t,u,f)}function lh(n,t){var i;return i=n.map(function(n){return ch(n.values,t)}),ah(i,t)}function ah(n,t){var i,r;return n.forEach(function(n){var u=ae(n,t);(u<i||!i)&&(i=u,r=n)}),r}function vh(n,t){var r,f,e,i,o,h,c,a=n.filter(function(n){return n&&u(n.value)});ao&&a.length!==0&&(at.html(vo(n)).style("visibility","hidden").style("display","block"),r=at.property("offsetWidth"),f=at.property("offsetHeight"),s?i=t[0]:(e=va(),i=e+is()+l(a[0].x)+20,o=i+r,c=e+ns()-rs(),o>c&&(i-=r+30)),h=t[1]+15+f<ts()?t[1]+15:t[1]-f,at.style("top",h+"px").style("left",i+"px").style("visibility","visible"))}function yh(){at.style("display","none")}function ph(n){var t=n.filter(function(n){return n&&u(n.value)});ao&&(cy(o.data.targets)||tt(o.data.targets)||c.selectAll("line.xgrid-focus").style("visibility","visible").data([t[0]]).attr(s?"y1":"x1",ai).attr(s?"y2":"x2",ai))}function wh(){c.select("line.xgrid-focus").style("visibility","hidden")}function vi(n){return n.x||n.x===0?l(n.x):null}function yi(n){return ft(n.id)(n.value)}function uy(){var n={},u=0,t,r;return au(vu).forEach(function(f){for(t=0;t<w.length;t++)if(!(w[t].indexOf(f.id)<0))for(r=0;r<w[t].length;r++)if(w[t][r]in n){n[f.id]=n[w[t][r]];break}i(n[f.id])&&(n[f.id]=u++)}),n.__max__=u-1,n}function fy(n,t,i,r){var u=r?ht:l;return t?function(r){var f=r.id in i?i[r.id]:0;return r.x||r.x===0?u(r.x)-n*(t/2-f):0}:function(){return 0}}function ey(n){return function(t){var i=n?li(t.id):ft(t.id);return i(t.value)}}function oy(n,t){var i=Object.keys(n);return function(r,u){var f=t?li(r.id):ft(r.id),e=f(0),o=e;return au(vu).forEach(function(t){t.id!==r.id&&n[t.id]===n[r.id]&&i.indexOf(t.id)<i.indexOf(r.id)&&t.values[u].value*r.value>0&&(o+=f(t.values[u].value)-e)}),o}}function sy(n,t,i){return dt?t?n.tickOffset()*2*.6/t:0:(s?p:y)*as(i)/(lr()-1)*.6}function lt(n,t){var r=i(n)?ar():n,u;for(typeof r=="string"&&(r=[r]),u=0;u<r.length;u++)bu[r[u]]=t===k[r[u]],k[r[u]]=t}function pi(n,t){var i=!1;return n.forEach(function(n){k[n.id]===t&&(i=!0);n.id in k||t!=="line"||(i=!0)}),i}function wr(n){return bu[n.id]?1:0}function hy(n){return pi(n,"bar")}function cy(n){return pi(n,"scatter")}function ly(n){return pi(n,"pie")}function ce(n){return pi(n,"donut")}function tt(n){return ly(n)||ce(n)}function le(n){var t=typeof n=="string"?n:n.id;return!(t in k)||k[t]==="line"||k[t]==="spline"||k[t]==="area"||k[t]==="area-spline"}function bh(n){var t=typeof n=="string"?n:n.id;return k[t]==="spline"||k[t]==="area-spline"}function vu(n){var t=typeof n=="string"?n:n.id;return k[t]==="bar"}function kh(n){var t=typeof n=="string"?n:n.id;return k[t]==="scatter"}function ay(n){var t=typeof n=="string"?n:n.id;return k[t]==="pie"}function dh(n){var t=typeof n=="string"?n:n.id;return k[t]==="donut"}function gh(n){return ay(n)||dh(n)}function nc(n){return vu(n)?n.values:[]}function vy(n){return le(n)||kh(n)?n.values:[]}function yy(n,t){var i=[],u=n,r=t!==null?t:["#2dcc70","#1abc9c","#3598DB","#9A59B5","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];return function(t){return t in u?n[t]:(i.indexOf(t)===-1&&i.push(t),r[i.indexOf(t)%r.length])}}function ei(n){var i;if(!n)throw Error(n+" can not be parsed as d3.time with format "+rf+". Maybe 'x' of this data is not defined. See data.x or data.xs option.");if(i=t.time.format(rf).parse(n),!i)throw Error("Failed to parse '"+n+"' with format "+rf);return i}function tc(n,i){var r=t.mouse(n),u=t.select(n),f=u.attr("cx")*1,e=u.attr("cy")*1;return Math.sqrt(Math.pow(f-r[0],2)+Math.pow(e-r[1],2))<i}function ic(n){var i=t.mouse(n),r=t.select(n),u=r.attr("x")*1,f=r.attr("y")*1,e=r.attr("width")*1,o=u-10,s=u+e+10,h=f-10;return o<i[0]&&i[0]<s&&h<i[1]}function py(n,t){for(var i=0;i<t.length;i++)if(t[i].start<n&&n<=t[i].end)return!0;return!1}function wy(n,t){var i=!1;return Object.keys(n).forEach(function(r){n[r]===t&&(i=!0)}),i}function ae(n,t){return Math.pow(l(n.x)-t[0],2)+Math.pow(d(n.value)-t[1],2)}function rc(n,t,i){na(n,t);c.select(".selected-circles-"+t.id).selectAll(".selected-circle-"+i).data([t]).enter().append("circle").attr("class",function(){return"selected-circle selected-circle-"+i}).attr("cx",s?yi:vi).attr("cy",s?vi:yi).attr("stroke",function(){return et(t.id)}).attr("r",ir*1.4).transition().duration(100).attr("r",ir)}function ve(n,t,i){ta(n,t);c.select(".selected-circles-"+t.id).selectAll(".selected-circle-"+i).transition().duration(100).attr("r",0).remove()}function uc(n,t,i,r){n?rc(t,i,r):ve(t,i,r)}function fc(){}function ye(){}function ec(n,t,i,r){n?fc(t,i,r):ye(t,i,r)}function pe(n){return n.filter(function(n){return u(n.value)})}function oc(n,t){return(t?c.selectAll(".-circles-"+t):c).selectAll(".-circle"+(u(n)?"-"+n:""))}function sc(n,t){oc(n,t).classed(vt,!0).attr("r",lo)}function we(n){oc(n).filter(function(){return t.select(this).classed(vt)}).classed(vt,!1).attr("r",cf)}function hc(n){return c.selectAll(".-bar"+(u(n)?"-"+n:""))}function by(n){hc(n).classed(vt,!1)}function ky(n){hc(n).classed(vt,!1)}function tp(n,t,u,f){var tt=-1,e,c,a="M",y,v,o,p,w,b,l,k,d,h=[],g;if(r(f))for(e=0;e<f.length;e++)h[e]={},h[e].start=i(f[e].start)?n[0].x:nt?ei(f[e].start):f[e].start,h[e].end=i(f[e].end)?n[n.length-1].x:nt?ei(f[e].end):f[e].end;for(k=s?function(n){return u(n.value)}:function(n){return t(n.x)},d=s?function(n){return t(n.x)}:function(n){return u(n.value)},y=nt?function(n,i,r,f){var e=n.x.getTime(),s=i.x-n.x,h=new Date(e+s*r),c=new Date(e+s*(r+f));return"M"+t(h)+" "+u(o(r))+" "+t(c)+" "+u(o(r+f))}:function(n,i,r,f){return"M"+t(v(r))+" "+u(o(r))+" "+t(v(r+f))+" "+u(o(r+f))},e=0;e<n.length;e++){if(i(h)||!py(n[e].x,h))a+=" "+k(n[e])+" "+d(n[e]);else for(v=oe(n[e-1].x,n[e].x),o=hr(n[e-1].value,n[e].value),p=t(n[e].x)-t(n[e-1].x),w=u(n[e].value)-u(n[e-1].value),b=Math.sqrt(Math.pow(p,2)+Math.pow(w,2)),l=2/b,g=l*2,c=l;c<=1;c+=g)a+=y(n[e-1],n[e],c,l);tt=n[e].x}return a}function be(i){var h,r,f,e,u;if(wu=t.select(oi),wu.empty()){n.alert('No bind element found. Check the selector specified by "bindto" and existance of that element. Default "bindto" is "#chart".');return}if(wu.html(""),o.data.x={},o.data.targets=cr(i),go(),es(),l.domain(t.extent(hu(o.data.targets))),d.domain(su("y")),ct.domain(su("y2")),ht.domain(l.domain()),uu.domain(d.domain()),fu.domain(ct.domain()),gt=l.domain(),rt.scale(ht),(wt||pt)&&g.scale(l),v=t.select(oi).append("svg").attr("width",y+a.left+a.right).attr("height",p+a.top+a.bottom).on("mouseenter",dc).on("mouseleave",gc),pu=v.append("defs"),pu.append("clipPath").attr("id",af).append("rect").attr("y",a.top).attr("width",y).attr("height",p-a.top),pu.append("clipPath").attr("id","xaxis-clip").append("rect").attr("x",-1-a.left).attr("y",-20).attr("width",fs).attr("height",wa),pu.append("clipPath").attr("id","yaxis-clip").append("rect").attr("x",-a.left+1).attr("y",a.top-1).attr("width",ba).attr("height",ka),c=v.append("g").attr("transform",ut.main),it=si?v.append("g").attr("transform",ut.context):null,wi=hi?v.append("g").attr("transform",ut.legend):null,at=t.select(oi).style("position","relative").append("div").style("position","absolute").style("z-index","10").style("display","none"),c.append("g").attr("class","x axis").attr("clip-path",s?"":"url("+document.URL+"#xaxis-clip)").attr("transform",ut.x).call(s?sr:ot).append("text").attr("class","-axis-x-label").attr("x",y).attr("dy","-.5em").style("text-anchor","end").text(el),c.append("g").attr("class","y axis").attr("clip-path",s?"url("+document.URL+"#yaxis-clip)":"").call(s?ot:sr).append("text").attr("transform","rotate(-90)").attr("dy","1.2em").attr("dx","-.5em").style("text-anchor","end").text(cl),so&&c.append("g").attr("class","y2 axis").attr("transform",ut.y2).call(ue),r=c.append("g").attr("clip-path",rr).attr("class","grid"),ho&&r.append("g").attr("class","xgrids"),sf&&(f=r.append("g").attr("class","xgrid-lines").selectAll(".xgrid-line").data(sf).enter().append("g").attr("class","xgrid-line"),f.append("line").attr("class",function(n){return""+n["class"]}),f.append("text").attr("class",function(n){return""+n["class"]}).attr("text-anchor","end").attr("transform",s?"":"rotate(-90)").attr("dx",s?0:-a.top).attr("dy",-5).text(function(n){return n.text})),dl&&r.append("g").attr("class","xgrid-focus").append("line").attr("class","xgrid-focus").attr("x1",s?0:-10).attr("x2",s?y:-10).attr("y1",s?-10:a.top).attr("y2",s?-10:p),co&&r.append("g").attr("class","ygrids"),hf&&(e=r.append("g").attr("class","ygrid-lines").selectAll("ygrid-line").data(hf).enter().append("g").attr("class","ygrid-line"),e.append("line").attr("class",function(n){return""+n["class"]}),e.append("text").attr("class",function(n){return""+n["class"]}).attr("text-anchor","end").attr("transform",s?"rotate(-90)":"").attr("dx",s?0:-a.top).attr("dy",-5).text(function(n){return n.text})),c.append("g").attr("clip-path",rr).attr("class","regions"),c.append("g").attr("clip-path",rr).attr("class","chart"),h=c.select(".chart").append("g").attr("class","event-rects").style("fill-opacity",0).style("cursor",wt||pt?s?"ns-resize":"ew-resize":null),c.select(".chart").append("g").attr("class","chart-bars"),c.select(".chart").append("g").attr("class","chart-lines"),c.select(".chart").append("g").attr("class","chart-arcs").attr("transform",ut.arc).append("text").attr("class","chart-arcs-title").style("text-anchor","middle").text(ra),wt||pt)c.insert("rect",kc?null:"g.grid").attr("class","zoom-rect").attr("width",y).attr("height",p).style("opacity",0).style("cursor",s?"ns-resize":"ew-resize").call(g).on("dblclick.zoom",null);if(gr!==null&&rt.extent(typeof gr!="function"?gr:gr(hu())),si&&(it.append("g").attr("clip-path",rr).attr("class","chart"),it.select(".chart").append("g").attr("class","chart-bars"),it.select(".chart").append("g").attr("class","chart-lines"),it.append("g").attr("clip-path",rr).attr("class","x brush").call(rt).selectAll("rect").attr(s?"width":"height",s?wf:nu),it.append("g").attr("class","x axis").attr("transform",ut.subx).attr("clip-path",s?"url("+document.URL+"#yaxis-clip)":"").call(eu)),hi&&ku(o.data.targets),wc(o.data.targets),b({withTransform:!0,withUpdateXDomain:!0}),ua){if(nt&&typeof ci=="string"){for(ci=ei(ci),u=0;u<o.data.targets[0].values.length;u++)if(o.data.targets[0].values[u].x-ci==0)break;ci=u}at.html(vo(o.data.targets.map(function(n){return lu(n.values[ci])})));at.style("top",yo.top).style("left",yo.left).style("display","block")}n.onresize==null&&(n.onresize=ep());n.onresize.add&&n.onresize.add(pc)}function ip(n){n.append("rect").attr("class",oh).style("cursor",bt&&ii?"pointer":null).on("mouseover",function(n,t){var i,r,u,f;if(!ur&&!tt(o.data.targets)){if(i=o.data.targets.map(function(n){return lu(n.values[t])}),Object.keys(ki).length>0){u=[];for(f in ki)for(r=0;r<i.length;r++)if(i[r].id===f){u.push(i[r]);i.shift(r);break}i=u.concat(i)}lf&&sc(t);by(t);ph(i)}}).on("mouseout",function(n,t){tt(o.data.targets)||(wh(),yh(),we(t),ky())}).on("mousemove",function(n,i){var r;ur||tt(o.data.targets)||(r=o.data.targets.map(function(n){return lu(n.values[i])}),vh(r,t.mouse(this)),bt)&&(ii||c.selectAll(".-shape-"+i).filter(function(n){return kt(n)}).each(function(){var n=t.select(this).classed(vt,!0);this.nodeName==="circle"&&n.attr("r",lo);v.select(".event-rect-"+i).style("cursor",null)}).filter(function(){var n=t.select(this);return this.nodeName==="circle"?tc(this,ir):this.nodeName==="rect"?ic(this,n.attr("x"),n.attr("y")):void 0}).each(function(){var n=t.select(this);n.classed(vt)||(n.classed(vt,!0),this.nodeName==="circle"&&n.attr("r",ir));v.select(".event-rect-"+i).style("cursor","pointer")}))}).on("click",function(n,t){if(!tt(o.data.targets)){if(pf){pf=!1;return}c.selectAll(".-shape-"+t).each(function(n){lc(this,n,t)})}}).call(t.behavior.drag().origin(Object).on("drag",function(){ac(t.mouse(this))}).on("dragstart",function(){vc(t.mouse(this))}).on("dragend",function(){yc()})).call(g).on("dblclick.zoom",null)}function rp(n){n.append("rect").attr("x",0).attr("y",0).attr("width",y).attr("height",p).attr("class","event-rect").on("mouseout",function(){tt(o.data.targets)||(wh(),yh(),we())}).on("mousemove",function(){var i,n,r;ur||tt(o.data.targets)||(i=t.mouse(this),n=lh(o.data.targets,i),r=[lu(n)],vh(r,i),lf&&(we(),sc(n.index,n.id)),ph(r),ae(n,i)<100?v.select(".event-rect").style("cursor","pointer"):v.select(".event-rect").style("cursor",null))}).on("click",function(){var i,n;tt(o.data.targets)||(i=t.mouse(this),n=lh(o.data.targets,i),ae(n,i)<100&&c.select(".-circles-"+n.id).select(".-circle-"+n.index).each(function(){lc(this,n,n.index)}))}).call(t.behavior.drag().origin(Object).on("drag",function(){ac(t.mouse(this))}).on("dragstart",function(){vc(t.mouse(this))}).on("dragend",function(){yc()})).call(g).on("dblclick.zoom",null)}function lc(n,i,r){var u=t.select(n),o=u.classed(yt),f=!1,e;n.nodeName==="circle"?(f=tc(n,ir*1.5),e=uc):n.nodeName==="rect"&&(f=ic(n),e=ec);(ii||f)&&(bt&&kt(i)&&(u.classed(yt,!o),e(!o,u,i,r)),gl(i,u))}function ac(n){var e,s,h,l,i,r,u,f;tt(o.data.targets)||bt&&((wt||pt)&&!g.altDomain||(e=yf[0],s=yf[1],h=n[0],l=n[1],i=Math.min(e,h),r=Math.max(e,h),u=ii?a.top:Math.min(s,l),f=ii?p:Math.max(s,l),c.select(".dragarea").attr("x",i).attr("y",u).attr("width",r-i).attr("height",f-u),c.selectAll(".-shapes").selectAll(".-shape").filter(function(n){return kt(n)}).each(function(n,e){var o=t.select(this),a=o.classed(yt),v=o.classed(gu),s,h,y,c,l=!1;this.nodeName==="circle"?(s=o.attr("cx")*1,h=o.attr("cy")*1,c=uc,l=i<s&&s<r&&u<h&&h<f):this.nodeName==="rect"&&(s=o.attr("x")*1,h=o.attr("y")*1,y=o.attr("width")*1,c=ec,l=i<s+y&&s<r&&h<f);l^v&&(o.classed(gu,!v),o.classed(yt,!a),c(!a,o,n,e))})))}function vc(n){tt(o.data.targets)||bt&&(yf=n,c.select(".chart").append("rect").attr("class","dragarea").style("opacity",.1),ur=!0)}function yc(){tt(o.data.targets)||bt&&(c.select(".dragarea").transition().duration(100).style("opacity",0).remove(),c.selectAll(".-shape").classed(gu,!1),ur=!1)}function b(n){var h,v,bt,w,kt,b,k,nt,ut,f,ft=uy(),dt,lt,e,ni,ri,ui,ii,fi,ei,vt=tt(o.data.targets),i,yt;if(n=r(n)?n:{},ni=r(n.withY)?n.withY:!0,ri=r(n.withSubchart)?n.withSubchart:!0,ui=r(n.withTransition)?n.withTransition:!0,ii=r(n.withTransform)?n.withTransform:!1,fi=r(n.withUpdateXDomain)?n.withUpdateXDomain:!1,ei=r(n.withUpdateOrgXDomain)?n.withUpdateOrgXDomain:!1,i=ui?nl:0,ei&&(l.domain(t.extent(hu(o.data.targets))),gt=l.domain(),g.scale(l).updateScaleExtent(),ht.domain(l.domain()),rt.scale(ht)),fi&&(l.domain(rt.empty()?gt:rt.extent()),(wt||pt)&&g.scale(l).updateScaleExtent()),d.domain(su("y")),ct.domain(su("y2")),c.select(".x.axis").style("opacity",vt?0:1).transition().duration(s?i:0).call(s?sr:ot),c.select(".y.axis").style("opacity",vt?0:1).transition().duration(s?0:i).call(s?ot:sr),c.select(".y2.axis").style("opacity",vt?0:1).transition().call(ue),c.select(".x.axis .-axis-x-label").attr("x",y),uu.domain(d.domain()),fu.domain(ct.domain()),at.style("display","none"),c.select("line.xgrid-focus").style("visibility","hidden").attr("y2",p),ho){if(bl==="year"){v=[];var oi=hu(),hi=oi[0].getFullYear(),ci=oi[1].getFullYear();for(yt=hi;yt<=ci;yt++)v.push(new Date(yt+"-01-01 00:00:00"))}else v=l.ticks(10);h=c.select(".xgrids").selectAll(".xgrid").data(v);h.enter().append("line").attr("class","xgrid");h.attr("x1",s?0:function(n){return l(n)-ot.tickOffset()}).attr("x2",s?y:function(n){return l(n)-ot.tickOffset()}).attr("y1",s?function(n){return l(n)-ot.tickOffset()}:a.top).attr("y2",s?function(n){return l(n)-ot.tickOffset()}:p).style("opacity",function(){return+t.select(this).attr(s?"y1":"x1")===(s?p:0)?0:1});h.exit().remove()}sf&&(bt=c.selectAll(".xgrid-lines"),bt.selectAll("line").transition().duration(i).attr("x1",s?0:yr).attr("x2",s?y:yr).attr("y1",s?yr:a.top).attr("y2",s?yr:p),bt.selectAll("text").attr("x",s?y:0).attr("y",yr));ni&&co&&(w=c.select(".ygrids").selectAll(".ygrid").data(d.ticks(10)),w.enter().append("line").attr("class","ygrid"),w.attr("x1",s?d:0).attr("x2",s?d:y).attr("y1",s?0:d).attr("y2",s?p:d),w.exit().remove());ni&&hf&&(kt=c.select(".ygrid-lines"),kt.selectAll("line").transition().duration(i).attr("x1",s?pr:0).attr("x2",s?pr:y).attr("y1",s?0:pr).attr("y2",s?p:pr),kt.selectAll("text").attr("x",s?0:y).attr("y",pr));k=c.selectAll(".-bars").selectAll(".-bar").data(nc);k.enter().append("path").attr("d",yu(ft,!1)).style("stroke","none").style("opacity",0).style("fill",function(n){return et(n.id)}).attr("class",eh);k.style("opacity",wr).transition().duration(i).attr("d",yu(ft,!1)).style("opacity",1);k.exit().transition().duration(i).style("opacity",0).remove();c.selectAll(".-line").style("opacity",wr).transition().duration(i).attr("d",dy).style("opacity",1);c.selectAll(".-area").style("opacity",0).transition().duration(i).attr("d",gy).style("opacity",cc);b=c.selectAll(".-circles").selectAll(".-circle").data(vy);b.enter().append("circle").attr("class",ty).style("opacity",0).attr("r",cf);b.style("opacity",wr).transition().duration(i).style("opacity",ry).attr("cx",s?yi:vi).attr("cy",s?vi:yi);b.exit().remove();c.selectAll(".chart-arc").select(".-arc").attr("transform",ii?"scale(0)":"").style("opacity",function(n){return n===this._current?0:1}).transition().duration(i).attrTween("d",function(n){var r=ou(n),i;return r?(i=t.interpolate(this._current,r),this._current=i(0),function(n){return tv(i(n),!0)}):function(){return"M 0 0"}}).attr("transform",ii?"scale(1)":"").style("opacity",1);c.selectAll(".chart-arc").select("text").attr("transform",iv).style("opacity",0).transition().duration(i).text(uv).style("opacity",function(n){return gh(n.data)?1:0});c.select(".chart-arcs-title").style("opacity",ce(o.data.targets)?1:0);si&&(t.event!==null&&t.event.type==="zoom"&&rt.extent(l.orgDomain()).update(),ri&&(it.select(".x.axis").style("opacity",vt?0:1).transition().duration(s?i:0).call(eu),rt.empty()||rt.extent(l.orgDomain()).update(),ut=it.selectAll(".-bars").selectAll(".-bar").data(nc),ut.enter().append("path").attr("d",yu(ft)).style("stroke","none").style("fill",function(n){return et(n.id)}).attr("class",eh),ut.style("opacity",wr).transition().duration(i).attr("d",yu(ft)).style("opacity",1),ut.exit().transition().duration(i).style("opacity",0).remove(),it.selectAll(".-line").style("opacity",wr).transition().duration(i).attr("d",np).style("opacity",1)));c.selectAll(".selected-circles").filter(function(n){return vu(n)}).selectAll("circle").remove();c.selectAll(".selected-circle").transition().duration(i).attr("cx",s?yi:vi).attr("cy",s?vi:yi);ti?(f=c.select(".event-rects").selectAll(".event-rect").data([0]),rp(f.enter()),f.attr("x",0).attr("y",0).attr("width",y).attr("height",p)):(vf?(e=function(n,t){var i=ds(t),r=pv(t);return(l(r?r:n.x+50)-l(i?i:n.x-50))/2},lt=function(n,t){var i=ds(t);return(l(n.x)+l(i?i:n.x-50))/2}):(e=da(),lt=function(n){return l(n.x)-e/2}),dt=wv(),c.select(".event-rects").datum(dt?dt.values:[]),f=c.select(".event-rects").selectAll(".event-rect").data(function(n){return n}),ip(f.enter()),f.attr("class",oh).attr("x",s?0:lt).attr("y",s?lt:0).attr("width",s?y:e).attr("height",s?e:p),f.exit().remove());nt=c.select(".regions").selectAll("rect.region").data(st);nt.enter().append("rect").style("fill-opacity",0);nt.attr("class",iy).attr("x",s?0:he).attr("y",s?he:a.top).attr("width",s?y:vs).attr("height",s?vs:p).transition().duration(i).style("fill-opacity",function(n){return u(n.opacity)?n.opacity:.1});nt.exit().transition().duration(i).style("fill-opacity",0).remove();ar().forEach(function(n){bu[n]=!0})}function up(){b({withTransition:!1,withY:!1,withSubchart:!1,withUpdateXDomain:!0})}function fp(){if(t.event.sourceEvent.type==="mousemove"&&g.altDomain){l.domain(g.altDomain);g.scale(l).updateScaleExtent();return}dt&&l.orgDomain()[0]===gt[0]&&l.domain([gt[0]-1e-10,l.orgDomain()[1]]);b({withTransition:!1,withY:!1,withSubchart:!1});t.event.sourceEvent.type==="mousemove"&&(pf=!0)}function ep(){function t(){n.forEach(function(n){n()})}var n=[];return t.add=function(t){n.push(t)},t}function pc(){go();es();rt.scale(ht);(wt||pt)&&g.scale(l);v.attr("width",bf).attr("height",ui);v.select("#"+af).select("rect").attr("width",y).attr("height",p);v.select("#xaxis-clip").select("rect").attr("width",fs);v.select(".zoom-rect").attr("width",y).attr("height",p);c.select(".x.axis").attr("transform",ut.x);c.select(".y2.axis").attr("transform",ut.y2);c.select(".chart-arcs").attr("transform",ut.arc);si&&(it.attr("transform",ut.context),it.select(".x.axis").attr("transform",ut.subx));hi&&(wi.attr("transform",ut.legend),ku(o.data.targets,{withTransition:!1}));b({withTransition:!1,withUpdateXDomain:!0})}function wc(n){var i,u,f,e,r,o,s,h,l,a;e=c.select(".chart-bars").selectAll(".chart-bar").data(n);f=e.enter().append("g").attr("class",function(n){return"chart-bar target target-"+n.id}).style("pointer-events","none");f.append("g").attr("class",uh).style("fill",function(n){return et(n.id)}).style("stroke","none").style("cursor",function(n){return kt(n)?"pointer":null});u=c.select(".chart-lines").selectAll(".chart-line").data(n);i=u.enter().append("g").attr("class",function(n){return"chart-line target target-"+n.id}).style("pointer-events","none");i.append("path").attr("class",rh).style("opacity",0).style("stroke",function(n){return et(n.id)});i.append("path").attr("class",ny).style("opacity",function(){return cc=+t.select(this).style("opacity"),0}).style("fill",function(n){return et(n.id)});i.append("g").attr("class",function(n){return"selected-circles selected-circles-"+n.id});i.append("g").attr("class",dv).style("fill",function(n){return et(n.id)}).style("cursor",function(n){return kt(n)?"pointer":null});n.forEach(function(n){var t=du(n.id);c.selectAll(".selected-circles"+t).selectAll(".selected-circle").each(function(t){t.value=n.values[t.x].value})});o=c.select(".chart-arcs").selectAll(".chart-arc").data(gf(n));r=o.enter().append("g").attr("class",function(n){return"chart-arc target target-"+n.data.id});r.append("path").attr("class",gv).style("opacity",0).style("fill",function(n){return et(n.data.id)}).style("cursor",function(n){return kt(n)?"pointer":null}).each(function(n){this._current=n}).on("mouseover",function(n){ls(n.data.id);ke(n.data.id)}).on("mouseout",function(n){se(n.data.id);de()});r.append("text").attr("dy",".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none");si&&(a=it.select(".chart-bars").selectAll(".chart-bar").data(n),l=a.enter().append("g").attr("class",function(n){return"chart-bar target target-"+n.id}),l.append("g").attr("class",uh).style("fill",function(n){return et(n.id)}),h=it.select(".chart-lines").selectAll(".chart-line").data(n),s=h.enter().append("g").attr("class",function(n){return"chart-line target target-"+n.id}),s.append("path").attr("class",rh).style("opacity",0).style("stroke",function(n){return et(n.id)}));hi&&ku(n);v.selectAll(".target").transition().style("opacity",1)}function br(n,t){o.data.targets.forEach(function(t){for(var i=0;i<n.length;i++)if(t.id===n[i].id){t.values=n[i].values;n.splice(i,1);break}});o.data.targets=o.data.targets.concat(n);wc(o.data.targets);b({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});t()}function ke(n){var t=v.selectAll(".legend-item"),i=function(t){return!n||t===n},r=function(n){return!i(n)};t.filter(r).transition().duration(100).style("opacity",.3);t.filter(i).transition().duration(100).style("opacity",1)}function op(n){var t=v.selectAll(".legend-item"),i=function(t){return!n||t===n},r=function(n){return!i(n)};t.filter(r).transition().duration(100).style("opacity",1);t.filter(i).transition().duration(100).style("opacity",.3)}function de(){v.selectAll(".legend-item").transition().duration(100).style("opacity",1)}function ku(n,t){var u=ar(n),f,s=y/2-di*Object.keys(n).length/2,e;t=i(t)?{}:t;e=r(t.withTransition)?t.withTransition:!0;f=wi.selectAll(".legend-item").data(u).enter().append("g").attr("class",function(n){return"legend-item legend-item-"+n}).style("cursor","pointer").on("click",function(n){ul(n)}).on("mouseover",function(n){ke(n);o.focus(n)}).on("mouseout",function(){de();o.revert()});f.append("rect").attr("class","legend-item-event").style("fill-opacity",0).attr("x",-200).attr("y",function(){return ri/2-16}).attr("width",di).attr("height",24);f.append("rect").attr("class","legend-item-tile").style("pointer-events","none").style("fill",function(n){return et(n)}).attr("x",-200).attr("y",function(){return ri/2-9}).attr("width",10).attr("height",10);f.append("text").text(function(n){return r(ki[n])?ki[n]:n}).style("pointer-events","none").attr("x",-200).attr("y",function(){return ri/2});wi.selectAll("rect.legend-item-event").data(u).transition().duration(e?250:0).attr("x",function(n,t){return s+di*t});wi.selectAll("rect.legend-item-tile").data(u).transition().duration(e?250:0).attr("x",function(n,t){return s+di*t});wi.selectAll("text").data(u).transition().duration(e?250:0).attr("x",function(n,t){return s+di*t+14})}function du(n){return n?"-"+n.replace(/\./g,"\\."):""}function ni(n){return".target"+du(n)}function ge(n){return gs(n.id)}function no(n){return"data"in n&&gs(n.data.id)}var o={data:{}},kr={},vt="_expanded_",yt="_selected_",gu="_included_",oi=h(["bindto"],"#chart"),nf=h(["size","width"],null),tf=h(["size","height"],null),to=h(["padding","left"],null),io=h(["padding","right"],null),pt=h(["scroll","enabled"],!1),wt=h(["zoom","enabled"],!1),ro=h(["zoom","extent"],null),kc=h(["zoom","privileged"],!1),dc=h(["onenter"],function(){}),gc=h(["onleave"],function(){}),nl=h(["transition","duration"],350),rt,g,v,pu,c,it,wi,at,wu,gt,cc,bu;bc("data","data is required in config");var bi=h(["data","x"],null),ti=h(["data","xs"],null),rf=h(["data","x_format"],"%Y-%m-%d"),tl=h(["data","id_converter"],function(n){return n}),ki=h(["data","names"],{}),w=h(["data","groups"],[]),uo=h(["data","axes"],{}),fo=h(["data","type"],null),k=h(["data","types"],{}),eo=h(["data","regions"],{}),il=h(["data","colors"],{}),bt=h(["data","selection","enabled"],!1),ii=h(["data","selection","grouped"],!1),kt=h(["data","selection","isselectable"],function(){return!0}),si=h(["subchart","show"],!1),uf=si?h(["subchart","size","height"],60):0,rl=h(["color","pattern"],null),hi=h(["legend","show"],!0),di=h(["legend","item","width"],80),ul=h(["legend","item","onclick"],function(){}),oo=h(["axis","x","type"],"indexed"),gi=h(["axis","x","categories"],[]),fl=h(["axis","x","tick","centered"],!1),dr=h(["axis","x","tick","format"],null),gr=h(["axis","x","default"],null),el=h(["axis","x","label"],null),ol=h(["axis","y","max"],null),sl=h(["axis","y","min"],null),hl=h(["axis","y","center"],null),cl=h(["axis","y","label"],null),ff=h(["axis","y","inner"],!1),ef=h(["axis","y","tick","format"],null),nr=h(["axis","y","padding"],null),ll=h(["axis","y","ticks"],10),so=h(["axis","y2","show"],!1),al=h(["axis","y2","max"],null),vl=h(["axis","y2","min"],null),yl=h(["axis","y2","center"],null),of=h(["axis","y2","inner"],!1),pl=h(["axis","y2","tick","format"],null),tr=h(["axis","y2","padding"],null),wl=h(["axis","y2","ticks"],10),s=h(["axis","rotated"],!1),ho=h(["grid","x","show"],!1),bl=h(["grid","x","type"],"tick"),sf=h(["grid","x","lines"],null),co=h(["grid","y","show"],!1),hf=h(["grid","y","lines"],null),kl=h(["point","show"],!0),cf=kl?h(["point","r"],2.5):0,dl=h(["point","focus","line","enabled"],!0),lf=h(["point","focus","expand","enabled"],!0),lo=h(["point","focus","expand","r"],lf?4:cf),ir=h(["point","focus","select","r"],8),gl=h(["point","onclick"],function(){}),na=h(["point","onselected"],function(){}),ta=h(["point","onunselected"],function(){}),ia=h(["arc","label","format"],function(n,t){return(100*t).toFixed(1)+"%"}),ra=h(["arc","title"],""),st=h(["regions"],[]),ao=h(["tooltip","enabled"],!0),vo=h(["tooltip","contents"],function(n){for(var s=ef?ef:function(n){return+n},r=hs(),i,f,e,o,t=0;t<n.length;t++)n[t]&&u(n[t].value)&&(i||(f=r?r(n[t].x):n[t].x,i="<table class='-tooltip'><tr><th colspan='2'>"+f+"<\/th><\/tr>"),o=n[t].name,e=s(n[t].value),i+="<tr class='-tooltip-name-"+n[t].id+"'><td class='name'><span style='background-color:"+et(n[t].id)+"'><\/span>"+o+"<\/td><td class='value'>"+e+"<\/td><\/tr>");return i+"<\/table>"}),ua=h(["tooltip","init","show"],!1),ci=h(["tooltip","init","x"],0),yo=h(["tooltip","init","position"],{top:"0px",left:"50px"}),af=oi.replace("#","")+"-clip",rr="url("+document.URL+"#"+af+")",nt=oo==="timeseries",dt=oo==="categorized",vf=!nt&&(bi||ti),yf=null,ur=!1,pf=!1,ri=hi?40:0,et=yy(il,rl),fa=function(){var n=[[t.time.format("%Y/%-m/%-d"),function(){return!0}],[t.time.format("%-m/%-d"),function(n){return n.getMonth()}],[t.time.format("%-m/%-d"),function(n){return n.getDate()!==1}],[t.time.format("%-m/%-d"),function(n){return n.getDay()&&n.getDate()!==1}],[t.time.format("%I %p"),function(n){return n.getHours()}],[t.time.format("%I:%M"),function(n){return n.getMinutes()}],[t.time.format(":%S"),function(n){return n.getSeconds()}],[t.time.format(".%L"),function(n){return n.getMilliseconds()}]];return function(t){for(var r=n.length-1,i=n[r];!i[1](t);)i=n[--r];return i[0](t)}}(),a,fr,er,y,wf,p,nu,ea,bf,ui,or,kf,df,tu,po,wo,gf,iu,ru,ne,te,oa,sa,ie,re,l,d,ct,ht,uu,fu,ot,sr,ue,eu,ha=s?"left":"bottom",ca=s?ff?"top":"bottom":ff?"right":"left",la=s?of?"bottom":"top":of?"left":"right",aa=s?"left":"bottom",ut={main:function(){return"translate("+a.left+","+a.top+")"},context:function(){return"translate("+fr.left+","+fr.top+")"},legend:function(){return"translate("+er.left+","+er.top+")"},y2:function(){return"translate("+(s?0:y)+","+(s?10:0)+")"},x:function(){return"translate(0,"+p+")"},subx:function(){return"translate(0,"+(s?0:nu)+")"},arc:function(){return"translate("+y/2+","+p/2+")"}},bo=40,ko=20;gf=t.layout.pie().value(function(n){return n.values.reduce(function(n,t){return n+t.value},0)});var dy=function(){var n=t.svg.line().x(s?function(n){return ft(n.id)(n.value)}:ai).y(s?ai:function(n){return ft(n.id)(n.value)});return function(t){var i=pe(t.values),r,u;return le(t)?(bh(t)?n.interpolate("cardinal"):n.interpolate("linear"),eo[t.id]?tp(i,l,ft(t.id),eo[t.id]):n(i)):(r=l(i[0].x),u=ft(t.id)(i[0].value),s?"M "+u+" "+r:"M "+r+" "+u)}}(),gy=function(){var n;return n=s?t.svg.area().x0(function(n){return ft(n.id)(0)}).x1(function(n){return ft(n.id)(n.value)}).y(ai):t.svg.area().x(ai).y0(function(n){return ft(n.id)(0)}).y1(function(n){return ft(n.id)(n.value)}),function(t){var i=pe(t.values),r,u;return pi([t],"area")||pi([t],"area-spline")?(bh(t)?n.interpolate("cardinal"):n.interpolate("linear"),n(i)):(r=l(i[0].x),u=ft(t.id)(i[0].value),s?"M "+u+" "+r:"M "+r+" "+u)}}(),yu=function(n,t){var f=n.__max__+1,i=arguments.length>1?t:!0,u=sy(ot,f,!!i),r=fy(u,f,n,!!i),e=ey(!!i),o=oy(n,!!i),h=i?li:ft;return function(n,t){var a=h(n.id)(0),f=o(n,t)||a,i=[[r(n),f],[r(n),e(n)-(a-f)],[r(n)+u,e(n)-(a-f)],[r(n)+u,f]],c=s?1:0,l=s?0:1;return"M "+i[0][c]+","+i[0][l]+" L"+i[1][c]+","+i[1][l]+" L"+i[2][c]+","+i[2][l]+" L"+i[3][c]+","+i[3][l]+" z"}},np=function(){var n=t.svg.line().x(s?function(n){return li(n.id)(n.value)}:sh).y(s?sh:function(n){return li(n.id)(n.value)});return function(t){var i=pe(t.values);return le(t)?n(i):"M "+ht(i[0].x)+" "+li(t.id)(i[0].value)}}();if(rt=t.svg.brush().on("brush",up),g=t.behavior.zoom().on("zoomstart",function(){g.altDomain=t.event.sourceEvent.altKey?l.orgDomain():null}).on("zoom",wt||pt?fp:null),rt.update=function(){return it&&it.select(".x.brush").call(this),this},rt.scale=function(n){return s?this.y(n):this.x(n)},g.scale=function(n){return s?this.y(n):this.x(n)},g.orgScaleExtent=function(){var n=ro?ro:[1,10];return[n[0],Math.max(lr()/n[1],n[1])]},g.updateScaleExtent=function(){var n,t,i;return wt?(n=cu(l.orgDomain())/cu(gt),t=this.orgScaleExtent(),i=[t[0]*n,t[1]*n]):pt&&(i=[1,1]),this.scaleExtent(i)},bu={},o.focus=function(n){function i(n){n.transition().duration(100).style("opacity",1)}var t=v.selectAll(ni(n)),r=t.filter(ge),u=t.filter(no);o.revert();o.defocus();i(r.classed("focused",!0));i(u);tt(o.data.targets)&&ls(n,!0);ke(n)},o.defocus=function(n){function i(n){n.transition().duration(100).style("opacity",.3)}var t=v.selectAll(ni(n)),r=t.filter(ge),u=t.filter(no);o.revert();i(r.classed("focused",!1));i(u);tt(o.data.targets)&&se(n);op(n)},o.revert=function(n){function i(n){n.transition().duration(100).style("opacity",1)}var t=v.selectAll(ni(n)),r=t.filter(ge),u=t.filter(no);i(r.classed("focused",!1));i(u);tt(o.data.targets)&&se(n);de()},o.show=function(n){v.selectAll(ni(n)).transition().style("opacity",1)},o.hide=function(n){v.selectAll(ni(n)).transition().style("opacity",0)},o.unzoom=function(){rt.clear().update();b({withUpdateXDomain:!0})},o.load=function(n){if(typeof n.done!="function"&&(n.done=function(){}),n.xs&&yv(n.xs),"categories"in n&&dt&&(gi=n.categories,ot.categories(gi)),"cacheIds"in n&&hv(n.cacheIds)){br(lv(n.cacheIds),n.done);return}if("data"in n)br(cr(n.data),n.done);else if("url"in n)t.csv(n.url,function(t,i){br(cr(i),n.done)});else if("rows"in n)br(cr(ws(n.rows)),n.done);else if("columns"in n)br(cr(bs(n.columns)),n.done);else throw Error("url or rows or columns is required.");},o.unload=function(n){o.data.targets=o.data.targets.filter(function(t){return t.id!==n});v.selectAll(ni(n)).transition().style("opacity",0).remove();hi&&(v.selectAll(".legend-item"+du(n)).remove(),ku(o.data.targets));o.data.targets.length>0&&b({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},o.selected=function(n){var i=du(n);return t.merge(c.selectAll(".-shapes"+i).selectAll(".-shape").filter(function(){return t.select(this).classed(yt)}).map(function(n){return n.map(function(n){return n.__data__})}))},o.select=function(n,u,f){bt&&c.selectAll(".-shapes").selectAll(".-shape").each(function(e,o){var s=this.nodeName==="circle"?rc:fc,h=this.nodeName==="circle"?ve:ye;u.indexOf(o)>=0?kt(e)&&(ii||i(n)||n.indexOf(e.id)>=0)&&s(t.select(this).classed(yt,!0),e,o):r(f)&&f&&h(t.select(this).classed(yt,!1),e,o)})},o.unselect=function(n,r){bt&&c.selectAll(".-shapes").selectAll(".-shape").each(function(u,f){var e=this.nodeName==="circle"?ve:ye;(i(r)||r.indexOf(f)>=0)&&kt(u)&&(ii||i(n)||n.indexOf(u.id)>=0)&&e(t.select(this).classed(yt,!1),u,f)})},o.toLine=function(n){lt(n,"line");b()},o.toSpline=function(n){lt(n,"spline");b()},o.toBar=function(n){lt(n,"bar");b()},o.toScatter=function(n){lt(n,"scatter");b()},o.toArea=function(n){lt(n,"area");b()},o.toAreaSpline=function(n){lt(n,"area-spline");b()},o.toPie=function(n){lt(n,"pie");fe();ee();b({withTransform:!0})},o.toDonut=function(n){lt(n,"donut");fe();ee();b({withTransform:!0})},o.groups=function(n){return i(n)?w:(w=n,b(),w)},o.regions=function(n){return i(n)?st:(st=n,b(),st)},o.regions.add=function(n){return i(n)?st:(st=st.concat(n),b(),st)},o.regions.remove=function(n,t){var i=[].concat(n);return t=r(t)?t:{},i.forEach(function(n){var i=u(t.duration)?t.duration:0;v.selectAll("."+n).transition().duration(i).style("fill-opacity",0).remove();st=st.filter(function(t){return t.classes.indexOf(n)<0})}),st},o.data.get=function(n){var t=o.data.getAsTarget(n);return r(t)?t.values.map(function(n){return n.value}):undefined},o.data.getAsTarget=function(n){var t=au(function(t){return t.id===n});return t.length>0?t[0]:undefined},o.resize=function(n){nf=n?n.width:null;tf=n?n.height:null;pc()},o.destroy=function(){o.data.targets=undefined;o.data.x={};wu.html("");n.onresize=null},"url"in f.data)t.csv(f.data.url,function(n,t){be(t)});else if("rows"in f.data)be(ws(f.data.rows));else if("columns"in f.data)be(bs(f.data.columns));else throw Error("url or rows or columns is required.");return o}})(window)